## Decis√£o de Modelagem do Banco de Dados

O banco de dados foi modelado visando flexibilidade, escalabilidade e clareza nas rela√ß√µes entre os principais elementos do sistema de um marketplace virtual. As principais decis√µes foram:

- **Separa√ß√£o de entidades principais**: Produtos, fornecedores, usu√°rios, pedidos e categorias foram separados em tabelas distintas para garantir organiza√ß√£o e facilitar manuten√ß√µes futuras.
- **Relacionamentos claros**: Tabelas intermedi√°rias como `produto_fornecedor` e `pedido_itens` permitem relacionamentos muitos-para-muitos, possibilitando que um produto tenha m√∫ltiplos fornecedores e um pedido contenha v√°rios itens.
- **Hist√≥rico e controle de pre√ßos**: A tabela `precos_fornecedor` permite registrar varia√ß√µes de pre√ßo ao longo do tempo, facilitando auditorias e negocia√ß√µes.
- **Imagens e detalhes**: A tabela `produto_imagens` permite m√∫ltimas imagens por produto, com indica√ß√£o de imagem principal, melhorando a experi√™ncia do usu√°rio.
- **Controle de status e datas**: Diversas tabelas possuem campos de status e timestamps para rastrear altera√ß√µes, ativa√ß√µes e desativa√ß√µes, garantindo integridade e hist√≥rico das opera√ß√µes.
- **Contato e informa√ß√µes detalhadas**: Tabelas como `contatos_fornecedor` e campos de endere√ßo detalhado nos pedidos aumentam a robustez do sistema para opera√ß√µes reais.

Essas decis√µes visam garantir um banco de dados normalizado, de f√°cil manuten√ß√£o, preparado para crescimento e mudan√ßas de requisitos, al√©m de facilitar integra√ß√µes futuras e an√°lises de dados.
 
---

### 1. Modelagem do Banco de Dados

A modelagem foi feita utilizando o conceito de normaliza√ß√£o, separando as entidades principais e intermedi√°rias para garantir integridade e flexibilidade. O diagrama abaixo ilustra as tabelas e seus relacionamentos:

![Diagrama do Banco de Dados](./drawSQL-image-export-2026-02-16.png)

Principais tabelas:
- **produtos**: armazena informa√ß√µes dos produtos.
- **fornecedores**: dados dos fornecedores.
- **usuarios**: usu√°rios do sistema.
- **pedidos**: pedidos realizados.
- **categorias**: classifica√ß√£o dos produtos.
- **produto_fornecedor**: rela√ß√£o entre produtos e fornecedores, incluindo pre√ßo e status.
- **pedido_itens**: itens de cada pedido.
- **precos_fornecedor**: hist√≥rico de pre√ßos dos fornecedores.
- **produto_imagens**: imagens dos produtos.
- **contatos_fornecedor**: contatos adicionais dos fornecedores.

### 2. Por que escolhi essa estrutura

Optei por essa estrutura para garantir:
- **Escalabilidade**: f√°cil adicionar novas funcionalidades sem grandes mudan√ßas na estrutura.
- **Flexibilidade**: permite m√∫ltiplos fornecedores por produto, m√∫ltiplas imagens, hist√≥rico de pre√ßos e controle detalhado de status.
- **Manuten√ß√£o**: tabelas normalizadas facilitam manuten√ß√£o, auditoria e integridade dos dados.
- **Performance**: consultas otimizadas por meio de relacionamentos bem definidos.

### 3. O que melhoraria se tivesse mais tempo

Se tivesse mais tempo, eu implementaria:
- **Procedures e triggers** para automatizar regras de neg√≥cio e garantir integridade adicional.
- **√çndices avan√ßados** para melhorar ainda mais a performance em consultas complexas.
- **Auditoria detalhada** de altera√ß√µes em todas as tabelas sens√≠veis.
- **Documenta√ß√£o t√©cnica** detalhada de cada tabela e relacionamento.
- **Testes de carga** para validar a performance em cen√°rios reais de uso.
- **Implementa√ß√£o de views** para facilitar relat√≥rios e integra√ß√µes.

Essas melhorias trariam ainda mais robustez, seguran√ßa e facilidade de uso ao banco de dados.

Este documento lista as melhorias t√©cnicas e funcionais planejadas para elevar a qualidade, seguran√ßa e escalabilidade do projeto **Virtual Market**.

---
 Backend (PHP API)

 Seguran√ßa
- [ ] **Autentica√ß√£o JWT Robusta**: Migrar da implementa√ß√£o manual para biblioteca padr√£o de mercado (`firebase/php-jwt`) com rota√ß√£o de chaves.
- [ ] **Rate Limiting**: Implementar limitador de requisi√ß√µes por IP para prevenir ataques de for√ßa bruta e DDoS.
- [ ] **Prote√ß√£o CSRF**: Adicionar tokens anti-CSRF para requisi√ß√µes que alteram estado.
- [ ] **Sanitiza√ß√£o Profunda**: Expandir a camada de prote√ß√£o SQL Injection (j√° iniciada) para valida√ß√£o rigorosa de todos os inputs (XSS).

 Banco de Dados & Arquitetura
- [ ] **Migrations Automatizadas**: Criar sistema de versionamento de banco de dados (ao inv√©s de editar `database.sql` manualmente).
- [ ] **ORM Leve**: Implementar ou adotar um micro-ORM para reduzir a repeti√ß√£o de c√≥digo SQL nos Models.
- [ ] **Dependency Injection**: Utilizar um Container de Inje√ß√£o de Depend√™ncia para desacoplar Controllers e Models.
- [ ] **Testes Unit√°rios (PHPUnit)**: Cobrir Models e Services com testes automatizados para garantir estabilidade em refatora√ß√µes.

 Performance
- [ ] **Cache (Redis/Memcached)**: Cachear consultas frequentes (ex: lista de categorias, produtos p√∫blicos) para reduzir carga no MySQL.
- [ ] **Filas (Queues)**: Processar tarefas pesadas (envio de emails, processamento de imagens) em segundo plano (RabbitMQ ou Redis).

 Novas Funcionalidades
- [ ] **Recupera√ß√£o de Senha**: Fluxo de "Esqueci minha senha" com envio de token por email.
- [ ] **Gateways de Pagamento**: Integra√ß√£o com APIs reais (Mercado Pago / Stripe / PIX).
- [ ] **Notifica√ß√µes**: Sistema de notifica√ß√µes em tempo real (WebSockets/Pusher) para status de pedidos.

---

üíª Frontend (React)

 UX/UI (Experi√™ncia do Usu√°rio)
- [ ] **Design System**: Padronizar componentes (Bot√µes, Inputs, Cards) para consist√™ncia visual.
- [ ] **Feedback Visual**: Implementar sistema global de "Toasts" (notifica√ß√µes flutuantes) para sucesso/erro de opera√ß√µes.
- [ ] **Skeleton Loading**: Substituir spinners de carregamento por "esqueletos" da interface para melhor percep√ß√£o de velocidade.
- [ ] **Mobile First**: Refinar o CSS para garantir experi√™ncia nativa em dispositivos m√≥veis (Touch targets maiores, menus adapt√°veis).

 Arquitetura & C√≥digo
- [ ] **Gerenciamento de Estado Global**: Implementar **Context API** ou **Zustand/Redux** para gerenciar Carrinho e Sess√£o de Usu√°rio de forma centralizada.
- [ ] **Custom Hooks**: Abstrair l√≥gica de API em hooks reutiliz√°veis (ex: `useProdutos`, `useAuth`, `useCarrinho`).
- [ ] **Valida√ß√£o de Formul√°rios**: Adotar **React Hook Form** + **Zod** para valida√ß√£o robusta e perform√°tica no lado do cliente.
- [ ] **TypeScript**: Migrar gradualmente de JavaScript para TypeScript para maior seguran√ßa de tipos e intellisense.

 Performance Frontend
- [ ] **Code Splitting**: Implementar `React.lazy` e `Suspense` para carregar p√°ginas apenas quando necess√°rias.
- [ ] **Otimiza√ß√£o de Imagens**: Servir imagens em formatos modernos (WebP/AVIF) e tamanhos adequados para cada dispositivo.

---

 DevOps & Infraestrutura

- [ ] **Docker**: Criar `Dockerfile` e `docker-compose.yml` para padronizar o ambiente de desenvolvimento (PHP + MySQL + PHPMyAdmin).
- [ ] **CI/CD**: Configurar GitHub Actions para rodar testes e linting a cada Push/PR.
- [ ] **Monitoramento**: Integrar ferramentas como **Sentry** para rastreamento de erros em tempo real no Front e Back.
- [ ] **Documenta√ß√£o API**: Gerar documenta√ß√£o autom√°tica (Swagger/OpenAPI) a partir das rotas existentes.

